# üìù ALEMBIC –®–ü–ê–†–ì–ê–õ–ö–ê

## üÜï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

1. –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å SQLAlchemy (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Database/posts.py`)
2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `Database/migrations/env.py`
3. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
   ```powershell
   cd Database
   alembic revision --autogenerate -m "Add posts table"
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –≤ `migrations/versions/`
5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å:
   ```powershell
   alembic upgrade head
   ```

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É

1. –ò–∑–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ)
2. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
   ```powershell
   cd Database
   alembic revision --autogenerate -m "Add email to users"
   ```
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å:
   ```powershell
   alembic upgrade head
   ```

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ë–î
alembic current

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
alembic history

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é
alembic downgrade -1

# –û—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ
alembic downgrade base

# –ü–æ–∫–∞–∑–∞—Ç—å SQL (–±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)
alembic upgrade head --sql
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê

‚úÖ **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `--autogenerate`  
‚úÖ **–í–°–ï–ì–î–ê** –ø—Ä–æ–≤–µ—Ä—è–π —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º  
‚úÖ **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π** –≤—Å–µ –º–æ–¥–µ–ª–∏ –≤ `env.py`  
‚úÖ **–ó–∞–ø—É—Å–∫–∞–π** –∫–æ–º–∞–Ω–¥—ã –∏–∑ –ø–∞–ø–∫–∏ `Database`  
‚ùå **–ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π** –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Database/
  ‚îú‚îÄ‚îÄ alembic.ini          ‚Üê –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ migrations/
  ‚îÇ   ‚îú‚îÄ‚îÄ env.py           ‚Üê –∏–º–ø–æ—Ä—Ç—ã –º–æ–¥–µ–ª–µ–π
  ‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako   ‚Üê —à–∞–±–ª–æ–Ω
  ‚îÇ   ‚îî‚îÄ‚îÄ versions/        ‚Üê —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
  ‚îú‚îÄ‚îÄ data.db              ‚Üê –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  ‚îî‚îÄ‚îÄ users.py             ‚Üê –º–æ–¥–µ–ª–∏
```
